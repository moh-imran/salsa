!function(e){function t(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var o={};return t.m=e,t.c=o,t.i=function(e){return e},t.d=function(e,t,o){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t){new Vue({el:"#premium",data:{suggestions:[],contentString:[],search:"",searchCommunityId:"",lar:"",lng:"",com_lat:"",com_long:"",infowindow:"",checked_marker_icon:"",single_community_flag:"",slider_schools:{},lastSchool:{},topSchool:{}},created:function(){this.loadCurrentLocation()},watch:{},methods:{loadSchools:function(e){var t=this;e&&(this.searchCommunityId=""),this.suggestions="",$("#suggestion-box").hide(),search=this.search.split("/").join("**s**"),this.$http.get("get-map-community-schools/"+encodeURI(search)+"/"+this.searchCommunityId).then(function(e){if(t.slider_schools="",t.lastSchool="",t.topSchool="",""!=e.body.data){t.contentString=[],t.com_lat=e.body.data.com_lat,t.com_long=e.body.data.com_long;for(var o=e.body.data.schools_array,n=e.body.data.schools_color_codes,i=0;i<o.length;i++)data={},data.marker_icon=n[i],data.content='<div id="content_'+o[i].code+'"><div id="siteNotice_'+o[i].code+'"></div><div id="bodyContent_'+o[i].title+'"><p><strong>'+o[i].title+"</strong><br> "+o[i].street_address+'<br><a style="cursor: pointer"  id="link_id_one_school"  class="custom_link"> Se skolans resultat</a> </p><div class="text-center center-block"><div class="compare_check"><input id="'+o[i].code+'"  class="compare_checkbox" type="checkbox" > <label for="'+o[i].code+'" class="'+o[i].code+'"> Välj </label><label class="1122"> Välj </label></div></div></div></div>',data.lat=o[i].lat,data["long"]=o[i]["long"],data.title=o[i].title,data.code=o[i].code,t.contentString[i]=data;t.init()}},function(e){})},init:function(){function e(e){var t=e.lat,o=e["long"],n=new google.maps.LatLng(t,o);i=new google.maps.Marker({position:new google.maps.LatLng(t,o),icon:e.marker_icon,map:r,title:e.title,content:$(e.content)[0],m_index:m,code:e.code}),d.extend(n),google.maps.event.addListener(i,"click",function(e){return function(){for(var t=!1,o=0;o<p.length;o++)p[o]==e.code&&(t=!0);if(window.innerWidth<769&&s+1>2)if(1==t){var n=this.get("content");$(n).find(".1122").hide(),$(n).find("."+e.code).show(),g.infowindow.setContent(n),g.infowindow.open(this.getMap(),this)}else{var n=this.get("content");$(n).find("."+e.code).hide(),$(n).find(".1122").show(),g.infowindow.setContent(n),g.infowindow.open(this.getMap(),this)}else{var n=this.get("content");$(n).find(".1122").hide(),$(n).find("."+e.code).show(),g.infowindow.setContent(n),g.infowindow.open(this.getMap(),this)}g.checked_marker_icon=e.icon,l=e.code,0==u.length&&u.push(l);for(var i=!0,a=0;a<u.length;a++)u[a]==l&&(i=!1);1==i&&u.push(l)}}(i))}var t=this,o=this.com_lat,n=this.com_long,i="",s=0,a={zoom:13,gestureHandling:"cooperative",disableDoubleClickZoom:!0,streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,center:new google.maps.LatLng(o,n),styles:[{featureType:"administrative",elementType:"all",stylers:[{saturation:"-100"}]},{featureType:"administrative.province",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"all",stylers:[{saturation:-100},{lightness:65},{visibility:"on"}]},{featureType:"poi",elementType:"all",stylers:[{saturation:-100},{lightness:"50"},{visibility:"simplified"}]},{featureType:"road",elementType:"all",stylers:[{saturation:"-100"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"all",stylers:[{lightness:"30"}]},{featureType:"road.local",elementType:"all",stylers:[{lightness:"40"}]},{featureType:"transit",elementType:"all",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"water",elementType:"geometry",stylers:[{hue:"#ffff00"},{lightness:-25},{saturation:-97}]},{featureType:"water",elementType:"labels",stylers:[{lightness:-25},{saturation:-100}]}]},c=document.getElementById("map"),r=new google.maps.Map(c,a);this.infowindow=new google.maps.InfoWindow({maxWidth:500});for(var l=0,d=new google.maps.LatLngBounds,h=[],m=0;m<this.contentString.length;m++)h[m]=t.contentString[m],e(h[m]);var u=[],p=[],g=this;$("#map").on("click","#link_id_one_school",function(){$("#one_school_codes_input").remove(),$("#one_schools_form").append('<input type="hidden" id="one_school_codes_input" name="school_codes" value="'+l+'">'),$("#one_schools_form").submit()});var _=0;$("#map").on("change",".compare_checkbox",function(){if($(this).is(":checked")){var e=g.checked_marker_icon.split("/")[2].split(".");s++,$(this).addClass("checked"),"marker_red"==e[0].trim()||"marker_red_checked"==e[0].trim()?g.infowindow.anchor.setIcon("assets/images/marker_red_checked.svg"):"marker_gray"==e[0].trim()||"marker_gray_checked"==e[0].trim()?g.infowindow.anchor.setIcon("assets/images/marker_gray_checked.svg"):"marker_green"==e[0].trim()||"marker_green_checked"==e[0].trim()?g.infowindow.anchor.setIcon("assets/images/marker_green_checked.svg"):"marker_orange"==e[0].trim()||"marker_orange_checked"==e[0].trim()?g.infowindow.anchor.setIcon("assets/images/marker_orange_checked.svg"):"marker_yellow"==e[0].trim()||"marker_yellow_checked"==e[0].trim()?g.infowindow.anchor.setIcon("assets/images/marker_yellow_checked.svg"):"marker_blue"!=e[0].trim()&&"marker_blue_checked"!=e[0].trim()||g.infowindow.anchor.setIcon("assets/images/marker_blue_checked.svg"),p[_]=$(this)[0].id,_++,$("#school_codes_input").remove(),$("#schools_form").append('<input type="hidden" id="school_codes_input" name="school_codes" value="'+p+'">')}else{s--,$(this).removeClass("checked");for(var t=0;t<h.length;t++)h[t].code==l&&g.infowindow.anchor.setIcon(h[t].marker_icon);for(var o=0;o<p.length;o++)p[o]==l&&(p.splice(o,1),_--),u[o]==l&&u.splice(o,1);$("#school_codes_input").remove(),$("#schools_form").append('<input type="hidden" id="school_codes_input" name="school_codes" value="'+p+'">'),0==s&&($(".chk_after").find(".compare_checkbox").remove(),u=[])}$("#selected_schools").html(s+" skolor"),0==s?$(".map_box:eq(0)").slideDown("fast",function(){$(this).nextAll(".map_box").slideUp("fast")}):1==s?($("#schools_form").append('<input type="hidden" id="school_codes_input" name="school_codes" value="'+p+'">'),$(".map_box:eq(1)").slideDown("fast",function(){$(this).nextAll(".map_box").slideUp("fast"),$(this).prevAll(".map_box").slideUp("fast")})):s>=2&&$(".map_box:eq(2)").slideDown("fast",function(){$(this).prevAll(".map_box").slideUp("fast")})})},hidesuggestions:function(){setTimeout(function(){$("#suggestion-box").hide()},500)},selectedVal:function(e,t){this.suggestions="",this.search=t,this.loadSchools(0)},selectCommunity:function(e){var t=this;if($("#suggestion-box").show(),"Enter"!=e.key){if(""==this.search)return void(this.suggestions="");search=this.search.split("/").join("**s**"),this.$http.get("select-community/"+search).then(function(e){t.suggestions=e.body},function(e){})}},loadCurrentLocation:function(){var e=this,t="/admin/get-comm-setting?search=",o=this;this.$http.get(t).then(function(t){e.single_community_flag=t.body.data[2].status,1==e.single_community_flag?(e.search=t.body.data[2].value,e.searchCommunityId=t.body.data[2].key_options,e.loadSchools(e.search)):($("#suggestion-box").hide(),setTimeout(e.suggestions="",1e3),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){o.$http.get("current-location-community-premium/"+e.coords.latitude+"/"+e.coords.longitude).then(function(e){o.search=e.body.data,o.selectedVal(e.body.data.com_code,e.body.data.com_title)},function(e){})},function(e){o.search="Stockholm",o.searchCommunityId="0180",o.loadSchools(o.search)}):(o.search="Stockholm",o.searchCommunityId="0180",o.loadSchools(o.search)))},function(e){})}}})}]);